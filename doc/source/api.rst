Api
===

通过用户id获取用户信息
------------------------

请求地址::

    v1.0/users/<user-id>

接口描述

  获取用户信息 , 注意`<user-id>`代表需要填写的用户id

请求类型

  HTTP GET

请求参数

    +---------+------+------+--------+--------+--------+
    | 参数名  | 类型 | 必填 | 描述   | 默认值 | 参考值 |
    +=========+======+======+========+========+========+
    | user-id | 数字 | Y    | 用户id | -      | 1      |
    +---------+------+------+--------+--------+--------+
    
    注意, url中的`<user-id>`应替换为user-id参数的值

正确返回Json

  用户Json :ref:`user_json` 

通过登录信息获取用户信息
-------------------------

请求地址::

    v1.0/users/myself

接口描述

  通过 HTTP Basic Auth 获取当前登录用户的用户信息

请求类型

  HTTP GET

请求参数

  无

正确返回json

  操作正确即返回 :ref:`user_json`

错误返回json示例

  see :ref:`error_json`

  未通过 http basic auth 认证::
  
      {
        "error": "unauthorized", 
        "message": "Invalid credentials"
      }
      
  账号密码有效， 但未通过认证::
  
      {
        "error": "forbidden",
        "message": "Unconfirmed account"
      }


通过登录信息获取课程表
------------------------

请求地址::

    v1.0/schedule/get-schedule

接口描述

  通过 HTTP Basic Auth 获取课程表

  课程表缓存:当两天内相同用户的课程表将不会从教务系统获取新的, 而是返回缓存的课程表.

请求类型

  HTTP GET

请求参数

    +-------------+--------------+---------------+----------------------------------------------------------------+
    | 参数名(key) | 说明         | value示例     | 备注                                                           |
    +=============+==============+===============+================================================================+
    | use_cache   | 是否使用缓存 | False 或 True | 当值为False时, 不使用服务端缓存.不填写或其他任意值均为使用缓存 |
    +-------------+--------------+---------------+----------------------------------------------------------------+
    | stu_id      | 学号         | 学生学号      |                                                                |
    +-------------+--------------+---------------+----------------------------------------------------------------+
    
    如需不使用缓存, 直接获取新课程表, url加上参数 "use_cache=False" 如::
        
        v1.0/schedule/get-schedule?use_cache=False
    
    如需指定查询学号的课表, 在url上加参数 "stu_id=学号" 如::
    
        api/v1.0/schedule/get-schedule?stu_id=0000000000
 
正确返回json

  操作正确即返回 :ref:`schedule_json` 

获取学校结构
-----------------

这是一大坨数据, 100K左右, 请注意缓存使用

请求地址::

  v1.0/school/get-structure

接口描述

  获取学校结构Json

请求类型

  HTTP GET

请求参数
  
  如需不使用服务端缓存, 请在url后加上参数 "?use_cache=False"

  +-------------+--------------+-----------+----------------------------------------------------------------+
  | 参数名(key) | 说明         | value示例 | 备注                                                           |
  +=============+==============+===========+================================================================+
  | use_cache   | 是否使用缓存 | False     | 当值为False时, 不使用服务端缓存.不填写或其他任意值均为使用缓存 |
  +-------------+--------------+-----------+----------------------------------------------------------------+

正确返回json

  see :ref:`school_structure_json`

获取学期学年信息
-----------------

请求地址::

   v1.0/school/get-semester

接口描述

  获取当前学年、学期Json

请求类型

  HTTP GET

请求参数
  
  无

正确返回json

  see :ref:`semester_json`

通过登录信息获取当前用户的成绩信息
------------------------------------

请求地址::

   v1.0/score

接口描述

  通过 HTTP Basic Auth 获取该用户的成绩信息

请求类型
  
  HTTP GET

请求参数

+-------------+----------+-----------+-------------------------------------+
| 参数名(key) | 说明     | value示例 | 备注                                |
+=============+==========+===========+=====================================+
| score_type  | 分数类型 | all new   | all 表示全部成绩， new 表示最新成绩 |
+-------------+----------+-----------+-------------------------------------+

正确返回json

  see :ref:`score_json`

异常返回json

  该用户没有用户代号 http响应码404::
  
    {
        "error": "该用户没有用户代号"
    }
  
  以现在登录方式来说， 这是一个不应该出现的错误

  
  教务系统出现网络问题 http响应吗502::
    
    {
        "error": "教务系统出现网络问题"
    }

